{% extends 'base.html' %}
{% load staticfiles %}


{% block content %}
    <h2>Timer Page!</h2>
    <div id="container">
        <p>How long do you want to meditate for?</p>
        <button id="threeMin" onclick="setThreeMin()">3 min</button>
        <button id="fiveMin" onclick="setFiveMin()">5 min</button>
        <button id="sevenMin" onclick="setSevenMin()">7 min</button>
        <button id="tenMin" onclick="setTenMin()">10 min</button>
        <button id="thirteenMin" onclick="setThirteenMin()">13 min</button>
        <button id="fifteenMin" onclick="setFifteenMin()">15 min</button>
        <br><br>
        
        
        <input type="text" id='text' value="  choose time">
        <br><br>
        <input type="button" value="Begin" onclick="startMe();">
        <input type="button" value="Pause" onclick="stopMe();">
        <input type="button" value="Finish Early" onclick="resetMe();">
        
        <p>Do you want to set an intention for your meditation?</p>
        <input type="text" id="intention" value=" set intention">
        <p>Choose Bell Sound</p>
        <button id="bellOne" onclick="setBellOne()">Bell One</button>
        <button id="bellTwo" onclick="setBellTwo()">Bell Two</button>
        <button id="bellThree" onclick="setBellThree()">Bell Three</button>
        <button id="noBell" onclick="setNoBell()">No Bell</button>    
    </div>

{% endblock %}

{% block scripts %}
    {{ block.super}}
    <!-- Add Moment.js for easier time formatting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <!-- Custom script to control the timer -->
    <script>
    var counter =  moment.utc(180*1000).format('mm:ss');
    var t;
    var isTimerOn = false;
        
    var tone = new Audio("http://kencodes.com/bong.mp3");
        
        
    function countdown() {
        document.getElementById("text").value = moment.utc(counter*1000).format('mm:ss');
        console.log(counter);
        counter--;
        t = setTimeout("countdown();", 1000);
        
        if (counter < 0) {
          stopMe();
          tone.play();
        }
    }
    
    function startMe() {
        if (!isTimerOn) {
          isTimerOn = true;
          tone.play();
          countdown();
        }
    }
    
    function stopMe() {
        isTimerOn = false;
        clearTimeout(t);
    }
    
    function resetMe() {
        isTimerOn = false;
        clearTimeout(t);
        counter = 0;
        document.getElementById("text").value = counter;
    }
    
    function setThreeMin() {
        counter = 180;
        counterDisplay = moment.utc(counter*1000).format('mm:ss');
        document.getElementById("text").value = counterDisplay;
        return counterDisplay;
        return counter;
    }
    
    function setFiveMin() {
        counter = 300;
        counterDisplay = moment.utc(counter*1000).format('mm:ss');
        document.getElementById("text").value = counterDisplay;
        return counterDisplay;
        return counter;
    }
    
    function setSevenMin() {
        counter = 420;
        counterDisplay = moment.utc(counter*1000).format('mm:ss');
        document.getElementById("text").value = counterDisplay;
        return counterDisplay;
        return counter;
    }
    
    function setTenMin() {
        counter = 600;
        counterDisplay = moment.utc(counter*1000).format('mm:ss');
        document.getElementById("text").value = counterDisplay;
        return counterDisplay;
        return counter;
    }
    
    function setThirteenMin() {
        counter = 780;
        counterDisplay = moment.utc(counter*1000).format('mm:ss');
        document.getElementById("text").value = counterDisplay;
        return counterDisplay;
        return counter;
    }
    
    function setFifteenMin() {
        counter = 900;
        counterDisplay = moment.utc(counter*1000).format('mm:ss');
        document.getElementById("text").value = counterDisplay;
        return counterDisplay;
        return counter;
    }


    </script>
    <script type="text/javascript" src="{% static "js/timer.js" %}"></script>
{% endblock %}